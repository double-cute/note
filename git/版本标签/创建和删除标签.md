# 创建和删除标签
> 标签分为轻量级标签（没有标签说明）和普通标签（有标签说明）.

<br><br>

## 目录

1. [标签的命名语法](#一标签的命名语法)
2. [创建轻量级标签](#二创建轻量级标签)
3. [创建普通标签](#三创建普通标签)
4. [轻量级标签和普通标签的区别：生成标签对象](#四轻量级标签和普通标签的区别生成标签对象--)
4. [删除和修改标签](#五删除和修改标签)

| 命令 | 说明 |
| --- | --- |
| git tag 标签名 [节点引用] | 为指定节点（默认为HEAD）创建一个轻量级标签 |
| git tag **-m 标签说明** 标签名 [节点引用] | 创建普通标签（须要标签说明）|
| git tag **-a** 标签名 [节点引用] | 创建普通标签，用vi输出标签说明 |
| git tag **-d** 标签名 | 删除指定标签名的标签（引用和标签对象）|
| 先删除后创建 | 修改标签的方法，没有相关命令 |

<br><br>

### 一、标签的命名语法：[·](#目录)
> 是git要求的语法，如果语法错误会导致git内部的歧义和异常.

- 四不要：
  1. 不要**包含**：空格 ~ ^ : ? \* [ ] / \\
  2. 不要以\-开头，不要以.结尾，不要以.lock结尾
  3. 不要出现连续2个或2个以上的.
  4. 不要包含@{

<br><br>

### 二、创建轻量级标签：[·](#目录)

- 命令：git tag 标签名 [节点引用]
  - 针对指定的节点引用（不写默认为HEAD）建立一个名为"标签名"的标签.
  - 没有标签说明.

<br><br>

### 三、创建普通标签：[·](#目录)
> 就是在创建轻量级标签命令的基础上加一个-m选项附加标签说明即可.

- 命令：git tag **-m** 标签说明 标签名 [节点引用]
  - 如果标签说明特别长，则采用-a选项而非-m选项：git tag **-a** 标签名 [节点引用]
    - 会直接用vi打开标签说明的编辑文档，让你慢慢写.

<br><br>

### 四、轻量级标签和普通标签的区别：生成标签对象  [·](#目录)

- 什么是标签对象：
  1. 标签对象中保存有标签的详细信息，包含以下：
    1. 标签名和标签所指节点的提交ID（这个自然不用说）.
    2. 标签说明.
    3. 标签创建的时间.
    4. 标签作者的信息.
    5. ····
  2. 标签对象和标签名一一对应.
  3. 标签对象保存在**.git/refs/tags/** 目录中被git统一管理.

<br>

- 但最重要的是：**只会为普通标签生成标签对象，轻量级标签不会生成标签对象.**
  - 轻量级标签仅仅就是一个节点引用罢了，没有标签对象.
  - 这就意味着轻量级标签：三无
    1. 无说明.
    2. 无创建信息.
    3. 无作者说明.
  - **这非常不利于团队协作.**
- 因此，应该尽量不用轻量级标签.

<br>

- **git describe会忽略轻量级标签:**
  - 如果指定节点之前没有普通标签（但是有轻量级标签）则会被认定为没有最近标签，会直接报错.
    - 除非使用--always选项.

<br><br>

### 五、删除和修改标签：[·](#目录)
> 所有的标签操作都不会被记录在git reflog中（创建、删除等一切），因此标签操作一定要慎重.

- 删除标签：git tag **-d** 标签名
  - 删除指定标签名的标签.
  - 对于轻量级标签，直接删除引用名.
  - 对于普通标签删除引用名和标签对象.

<br>

- 修改标签：
  - 无非就是修改标签的名字或者是标签说明.
  - git没有提供这样的命令，**先删除再重新创建** 即可.
