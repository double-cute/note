# 对称加密VS非对称加密
> 对称加密采用单秘钥，非对称加密采用双秘钥，后者更安全可靠.
>
>> git的SSH验证采用的就是非对称加密中的RSA加密.

<br><br>

## 目录

1. [加密、解密、加密算法、秘钥](#一加密解密加密算法秘钥)
2. [现代密钥机制以及加密攻击](#二现代密钥机制以及加密攻击)
3. [对称加密](#三对称加密)
4. [非对称加密：公钥加密](#四非对称加密公钥加密--)
5. [目前流行的非对称（公钥）加密技术]()

<br><br>

### 一、加密、解密、加密算法、秘钥：[·](#目录)

- 基本定义：
  1. x是明文，y是密文.
  2. 加密函数f满足：y = f(x)
  3. 解密函数F满足：x = F(y)

<br>

- 加密、解密：
  1. 加密就是让x变成y的过程，即加密函数f.
  2. 解密就是让y变成x的过程，即解密函数F.
- 加密算法：定义为**f->F**
    - 由加密函数指向解密函数.
    - 方向就表示用f加密，F解密.
- 可逆加密算法：
  - 如果解密函数也可以用来加密，并且解密函数加密后的密文可以用加密函数破解，那么这样的加密算法就是可逆的加密算法.
  - 即满足y = f(x), x = F(y)的基础上，**同时还满足** y = F(x), x = f(y)
  - 可逆加密算法定义为：**f<->F**
    - 关系是双向的，此时f和F不分彼此，都称为加解密函数.
- 不可逆加密算法：即f和F之间的关系是单向的
  1. 如果是f->F，那么f就是加密函数，F是解密函数.
  2. 如果是F->f，那么F就是加密函数，f就是解密函数.
- 在不知道加密算法时候可逆的情况下就直接用**f-F**表示一个加密算法：
  - \-表示两者关系未知.
  - 仅仅是笼统地表示这是一个加密算法罢了.

<br>

- 加密算法**可逆的条件**：那必定是明文x和密文y的**定义域完全相同**才行.
  - 例如：
    1. 如果f-F定义为一个二元一次方程x + y + 1 = 0
      - 即f(x) = -x - 1, F(y) = -y - 1
        - 发现x和y的定义域都是R，因此即可以f->F，也可以F->f，因此是一个双向的关系，即f<->F.
    2. 如果f-F定义为密表加密：
      - 即f(x) = x在《老人与海》中的(页, 行, 列)三元组，F(y) = 根据y这个三元组在《老人与海》中查到相应的x
        - 发现x是书中的字，y是三元组，两者类型不同，更别提定义域了，因此关系是不可逆的，只能是f->F.

<br>

- 秘钥：
  - 称为**secret key**，简称key，用k表示.
  - 定义是：加密算法f-F的**输入参数**.
  - 回顾上例：
    1. f<->F：x + y + 1 = 0
      - f(x) = -x - (**+1**), F(y) = -y - (**+1**)
      - 那么秘钥k就是+1，即k = +1，即只有知道方程的参数+1后才能正确地求x或y.
    2. f->F：密表《老人与海》加密
      - f(x) = x在**《老人与海》**中的(页, 行, 列)三元组，F(y) = 根据y这个三元组在**《老人与海》** 中查到相应的x
      - 那么密钥k就是**《老人与海》** ，即k = 《老人与海》，即只有知道到底是哪本书作为密表才能正确地加解密.
- 因此加密算法的总定义应该是：**[f:kf]-[F:kF]**
  1. kf就是函数f的输入参数，即f的密钥.
  2. kF就是函数F的输入参数，即F的密钥.
- 一般为了方便起见，加密算法还是笼统地定义为**f-F**，默认两者密钥分别为kf和kF了.

<br><br>

### 二、现代密钥机制以及加密攻击：[·](#目录)

- 目前广泛采用的加密机制：
  - 往往加密算法是**公开的**.
    - 例如，这家网站本身就已经在证书上告诉大家该网站和浏览器通信使用的加密算法是AES或者是IDEA之类的，请大家事先给浏览器装好相关的加密算法实现软件.
  - 而密文在传输过程中也是暴露在外界的.
    - 这是必然的，明文加密后可以在网络上随意传输，骇客们可以随便拦截.
  - 而唯一不公开的就是通信双方的密钥了.
    - 骇客想破解密文必须要有解密函数的密钥才行.
    - 解密密钥就可以直接破解了.
    - 密钥就相当于门钥匙，如果小偷拿到了你家钥匙，那就呵呵了.

<br>

- 加密攻击：**就是指破解密钥的行为**
  1. 最简单粗暴的方式就是通过各种手段偷取解密密钥，有了密钥就可以直接破解密文（毕竟加密算法也是公开的）.
  2. 那没有密钥怎么办呢？
    - 就只能通过暴露在外界的密文样本、公开的加密算法和自己的聪明才智破解出密钥，然后再破解密文咯!

<br>

- 加密攻击的代价：
  - 就是指根据密文样本、公开的密钥算法来破解密钥的难度.
  - 难度包括是指能否在有限的时间和有限的步骤之内完成密钥的破解.

<br><br>

### 三、对称加密：[·](#目录)
> 是指kf和kF可以非常轻松地相互推导出.

- 人头风险：
  - 由于对称加密的特性（kf和kF容易相互推导）.
    - 因为通信双方分别持有kf/kF，任意一方泄露就导致秘密的公开.
    - 人数越多风险越大，两个人就是2人头风险，只有一个人持有就只有1个人头的风险.

<br>

- 对称加密**最严重的缺点**：**无法大规模应用**
  - 设想，如果一个企业内部通信采用对称加密的形式，总共n个成员，那么两两成员之间都要通信就需要n^2数量级的密钥对，管理起来简直就是灾难.
  - 接着上面的例子，如果不怕麻烦硬生生地把全部密钥对发放下去，那么多人真的每个人都可靠吗？
    - 如果其中一个人不小心泄露了它的密钥，那么骇客就可以用该密钥破解这个人电脑里的加密文件.
    - 而如果破解的这个文件刚好又是密钥管理文件呢？那么所有和这个人通信的其他同事的密钥也会被破解，继而整个网络没有任何秘密可言.
- 上面例子中的加密算法都是典型的对称型加密算法：
  - 特别的，像上面的密表加密法是最最典型的对称型加密算法，如果用《老人与海》加密，那你用《天龙八部》解密肯定行不通.
- 因此只能在一些特殊的网络中应用.

<br>

- 对称加密的优点：
  1. 算法比较简单：kf和kF能互推的算法往往复杂度都不高.
  2. 因此计算量小，加解密效率高.
  3. 适用于一些快速响应的应用场合.
    - 像网游等.
  4. 对称加密往往是通过增加密钥的长度来提升破解的复杂度，这方面理论比较成熟，破解方面的安全性往往是可以保障的.

<br><br>

### 四、非对称加密：公钥加密  [·](#目录)
> 必须满足两个条件：
>   1. 加密算法可逆.
>   2. 即kf和kF无法相互推导.

- 如何理解kf和kF**无法**相互推导：
  - 实际上，在数学上是不可能创造出kf和kF完全不能相互推导的加密算法的.
  - 但如果数学上能保证kf和kF相互推导的难度超级大，比如大到用超级计算机跑1000年才能破解出的难度，那也是满足**无法**推导的条件的.

<br>

- 公钥和私钥：
  - 既然kf和kF无法相互推导了，那么就可以公开其中一把了，只要保管好另外一把就行了.
  - 然后用公开的公钥加密明文，用不公开的私钥破解密文即可.
    - 因为即使黑客知道公钥也没办法破解密文，原因是显然的：
      1. 私钥被保管好了，无法被偷取（假设保管的很好）.
      2. 无法根据公钥、算法、密文推导出私钥.
        - 因此没私钥就别想破解密文.

<br>

- 公钥和私钥的分工：
  1. 公钥加密私钥解密：
    - 这前面已经说了，很显然应该这么用：公钥加密保密信息，传送给私钥者，然后用私钥破解信息.
    - 但**绝不能**用私钥加密传送密文然后用公钥解密，因为公钥是公开的，可以直接破解私钥加密的密文！！
      - 千万别犯傻！
    - 因此非对称加密也称为公钥加密.
  2. 私钥签名公钥验签：
    - 如果有其它人冒充持有私钥的人和公钥者通信该怎么办呢？
      1. 私钥者随便想个字符串abcdefg，然后用私钥加密得到kejfiswo.
      2. 然后将明文abcdefg和密文kejfiswo一起发送给公钥者.
      3. 如果公钥者能用公钥把密文kejfiswo解密成abcdefg，就说明跟公钥者通信的一定是私钥者，而不是其它冒充者.
      4. 因为只有私钥者持有私钥，才能用私钥把abcdefg加密成kejfiswo这个样子，其它人没有私钥，无法把abcdefg加密成kejfiswo这个样子.
      5. 因此用私钥加密的信息可以作为私钥者的身份识别！
        - 因此用私钥加密的东西就叫做私钥者的签名，然后公钥验签.

<br>

- 非对称加密的优点：可大规模应用
  - 相比于对称加密，绝对可以大规模应用.
    - 如果企业有n个人，那么就只要发放n对密钥对即可，每个人保管好自己的私钥，然后把自己的公钥复制交给其他n - 1个人，然后大家愉快地通信即可.
    - 即使有二货泄露了自己的私钥也不会影响到其他人的安全，因为你不能保管其它人的私钥，而通过其他人的公钥又是无法破解对应的私钥的！
  - 破解安全性：和对称加密应该是一个级别的，即不偷密钥的情况下几乎不可能破解密钥.
  - 应用安全性：大大高于对称加密，**特别是人头风险**.
    - 如果通信网络中人数是n，那么对称加密的风险数量级是n^2，而非对称加密的风险只有n，整整一个数量级.
- 缺点：
  - 算法往往比较复杂，比较耗时.
  - 用在高保密性但对效率要求不高的场合.

<br><br>

### 五、目前流行的非对称（公钥）加密技术：[·](#目录)

1. RSA：已经介绍过了
  - 其升级版有RSA1
2. DSA：
  - Digital Signature Algorithm，即数字签名算法.
  - RSA既可以用于加密也可以用于签名，而DSA专业用于签名，不用于加密.
  - 基于**整数有限域离散对数难题**，可以严格确认签名是否被人做了手脚.
  - 其升级版本ECDSA.
3. ED25519：也是用于数字签名的算法.
4. SSH身份验证支持以上所有算法，但不过用的最多的还是RSA.
