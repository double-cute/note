# 配置远仓以简化push和pull
> git pull和git push命令的完整形式非常长.
>   - 长命令的坏处就是：
>     1. 编写麻烦，如果命令需要多次重复使用则相当费时费力.
>     2. 命令过长容易写错.
>
>> 但是如果合理的配置远程仓库和本地git客户端通信的方式，可以可以大大简化push和pull命令.
>>   - 说白了，还是让git自动为你补充命令中缺省的部分.
>>   - 配置的意思就是事先约定好命令的缺省部分如何填写.

<br><br>

## 目录

1. []()

<br><br>

### 一、本地分支、远程分支、上游分支、不同名现象：

- 本地分支：
  - 顾名思义，就是本地仓库中的分支.
  - 精确地讲就是**git branch命令输出的所有分支**.

<br>

- 远程分支：
  - 显而易见，就是远程仓库中的分支.

<br>

- 上游分支：精确地讲，应该是“本地分支的上游分支”
  - 是指本地分支对应的远程分支.
  - 这是一个**特殊的动态的概念**，要根据当时的情景来确定一个本地分支的上游分支是什么：
    1. 当你push一个本地分支到远程分支时，那么该远程分支就是该本地分支的**push上游分支**.
    2. 当你pull一个上游分支到本地分支时（精确地讲应该是同步到本地分支），那么该远程分支就是该本地分支的**pull上游分支**.

<br>

- 不同名现象：
  - git允许本地分支和其对应的上游分支不同名.
  - 比如：同一个本地分支A，既可以push到远程分支REMOTE_B上也可以push到远程分支REMOTE_C上，不要求其上游分支也和A的名称（A）一样.

<br><br>

### 一、git pull/push的完整形式：

- pull：git pull 远仓地址 远程分支1:本地分支1 远程分支2:本地分支2 ···
  - 意思很显然，就是将远仓中的指定分支同步到指定的本地分支上，其同时指出了该命令各个本地分支对应的**pull上游分支**.
    - 其中隐含的信息有：
      1. 可以**只**拉回远仓中的某几个分支同步到本地.
        - 之前简化版的git pull默认拉回远仓的所有分支到本地.
      2. 本地分支的上游分支（远仓中对应的分支）的命名可以和该本地分支**不同**！
        - 例如：git pull git@github.com:double-cute/test.git master:master **bra**:**branch**
        - 这里，本地分支branch的上游分支名为bra，两者可以不同，而master:master就是同名的典型.
  - 异常处理：
    1. 如果远程分支不存在则直接报错“远程仓库中不存在该分支！”
    2. 对于命令中指定的本地分支：
      - 如果存在，则正常拉回.
      - 如果不存在则创建一个新的该本地分支.

<br>

- push：git push 远仓地址 本地分支1:远程分支1 本地分支2:远程分支2 ···
  - 将指定的本地分支推送到指定远仓中的指定远程分支上，同时指出了本地分支对应的**push上游分支**.
  - 异常处理：
    1. 对于命令中指定的远程分支：
      - 如果不存在，则会自动**在远仓中**创建一个同名的分支.
        - 例如：git push origin master:curv
          - 如果curv分支在远仓origin中不存在，则会自动在远仓中创建一个名为curv的远程分支.
      - 如果存在，则正常推送.
    2. 如果命令中指定的本地分支不存在，则会直接报错拒绝推送.

<br><br>

### 二、简化远仓URL地址-注册远仓：git remote add
> 对远程仓库的所有配置最终都会写入**.git/config**文件中.
>
>> 所有的远仓配置命令实际上都是在修改.git/config文件，因此最直接的配置方式就是编辑.git/config文件.

- 首当其冲的是**远仓地址**部分.
  - 毕竟远仓URL比较长，字符特别多，因此最应该得到简化.

<br>

- 最容易想到的解决方案就是**用一个符号**来代替远仓地址.
  - 这个符号就是**远仓标识符**，俗称**远仓别名**.
    - 配置合适的符号来代替指定远仓地址的过程就是**在本地仓库中注册远程仓库**.
      - 但实际中远仓标识符**绝不仅仅只有代替远仓URL地址的功能**，还有更多的含义和用途！这个后面会细说.

<br>

- 注册远仓使用的命令：**git remote add 远仓标识符（即远仓别名） 远仓URL地址**
  - 示例：git remote add **test_repo** git@github.com:double-cute/test.git
    - 向本地仓库注册了一个**git@github.com:double-cute/test.git**远仓，其别名为**test_repo**.
  - 之所以是别名，那是因为这个别名是由本地仓库的用户自己随意取的，**可以不和真实的远仓名称相同**.
    - 例如：一个远仓git@github.com:double-cute/test.git的真实名称应该是test，但是我可以在本地仓库中用test1来代替该URL，作为远仓别名.
    - 有了标识符，推送或拉回的时候就可以直接用别名来代替冗长的远仓URL了，例如：git push test1 master:master

<br>

- .git/config中的表现：
  - 多了一个[remote "远仓别名"]的节，其中的属性url的值为注册时给出的远仓URL地址，例如：

```
[remote "repo_test"]
    url = git@github.com:double-cute/test.git
```

<br>

- 灵活用法：
  1. 可以同时注册多个远仓：
    - 例如：一个远仓专门用来pull，一个专门用来push作为测试仓库之类的.
  2. 可以为同一个远仓注册多个不同的别名：
    - 例如，同一个远仓git@github.com:double-cute/test.git在本地同时注册一个release别名和一个bugfix别名.
      - 然后只用releasep推送经过完善测试的发布性分支，只向bugfix推送修复bug的补丁分支.
    - 特别适用于同一个远仓具有多种功能性分支的场景.

<br>

- **git clone会默认注册一个名为origin的远仓：**
  - git clone命令会自动为**被clone的远仓**注册一个名为origin的本地别名.
    - 例如：git clone git@github.com:double-cute/test.git
    - 接下来查看test/.git/config文件会看到

```
[remote "origin"]
    url = git@github.com:double-cute/test.git
```
