# 基本类型补充 & 类型转换

<br><br>

## 目录

1. [布尔型]()
2. [Java各个数据类型的长度以及大小范围总结]()
3. [自动类型转换]()
4. [数值和字符串相互转化汇总]()

<br><br>

### 一、布尔型：[·](#目录)

- Java严格控制boolean类型的使用，以避免犯C语言那样因为各种不严谨所导致的软件危机，主要体现在如下方面：
  1. boolean**不能和其它任何基本类型之间进行转换**（强转也不行）！！
  2. if、else if、while、do while、for、（? : 三目运算符）的条件判断部分的值的类型必须且**只能是boolean，不和其它基本数据类型兼容**！！

<br><br>

### 二、Java各个数据类型的长度以及大小范围总结：[·](#目录)

- 可以通过基本类型的包装器类型的SIZE域查看：
  - Character.SIZE / 8   // 单位是二进制位的个数，除以8得到字节数
  - Double.SIZE
  - Boolean没有，不同平台不同.

| 类型 | 长度（字节）| 范围 |
| --- | --- | --- |
| byte | 1 | -128 ~ 127 |
| short | 2 | -3w2 ~ 3w2 |
| char | 2 | 0 ~ 65535 |
| int | 4 | -21开头的十位数 ~ 一样 （21亿当量）|
| long | 8 | -92开头的19位数 ~ 一样 （92G当量）|
| float | 4 | 很大 |
| double | 8 | 超大 |
| boolean | 未知（一般是1字节）| 根据普通平台的极其自然长度来定 |

<br><br>

### 三、自动类型转换：[·](#目录)
> 这里的自动类型转换只针对基本数值类型.

<br>

- 从小到大的顺序为：

byte -> short -> int(<- char) -> long -> float -> double

- 注意：
  1. **体系中没有boolean.**
  2. char和short是平行的，byte可以自动赋值给short，但不能赋给char（类型冲突）.

<br>

- 基本数据类型和字符串进行连接（+）：
  1. 任何基本数据类型（包括boolean）和字符串（String）类型进行+连接后都会被提升成String类型.
  2. 单纯的将基本数据类型转化成字符串表示可以和空字符串""进行连接.
    - 例如：5 + ""; 或者 "" + 5;
  3. 再进行多值连续连接时需要注意**基本类型数据连续连接**的问题.
    - 其实是由+运算符的从左至右结合顺序导致的
    1. "abc" + 5 + 3  ==  abc53  
    2. 5 + 3 + "abc"  ==  8abc
    3. "abc" + 5 + 3 + "ok"  ==  abc53ok
    4. **'a' + 7 + "abc"  ==  104abc   // 'a' + 7先做整数相加**

<br>

- 表达式中的自动类型提升：
  1. 整个表达式最终的编译时类型一定是范围最大的那个类型.
  2. 一定要先看表达式各个项的计算先后顺序，否则容易出错！
    - 例如：**8.3 * (5 / 6)  ==  0   // 先做5/6，但这是int相除，结果是0**
  3. 注意整型中的兼容窄化和表达式混合运算的错误问题：
    - 典型的例如：
      - short a = 5; short b = a - 2;  // a(short)、2(int)，因此a - 2的编译时类型为int，int赋给short发生错误！
      - 因此只能强制类型转换：short b = a - (short)2;或者short b = (short)(a - 2);

<br><br>

### 四、数值和字符串相互转化汇总：[·](#目录)
> 所有 **[字符串 -> 数值]** 的方法都会都会抛出 **解析异常[NumberFormatException]**.

<br>

| 转换方向 | 方法描述 | 具体方法 | 注意事项 |
| --- | --- | --- | --- |
| 字符串 -\> 数值（包装器） | 包装器的构造器 | Type(String val); | 返回类型是**包装器类型** |
| 字符串 -\> 数值（基本类型） | 包装器的parseType静态工具方法 | static type **Type.parseType**(String val); | 返回类型是**基本类型** |
| 数值（基本类型） -\> 字符串 | String的valueOf静态工具方法 | static String **String.valueOf**(type val); | 传入的是基本类型（当然可以自动拆箱（传包装器））|
| 数值（基本、包装器）-\> 字符串 | 和空串连接 | "" + val | val如果是包装器类型则默认调用覆盖好的**toString**方法 |
