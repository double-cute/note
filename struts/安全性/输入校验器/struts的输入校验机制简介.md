# struts的输入校验机制简介
> 输入校验就是检查并阻止异常的表现层输入数据进入系统的机制.

## 目录
1. [异常输入的分类]()
2. [输入校验的分类]()

<br><br>

### 一、异常输入的分类：[·](#目录)
1. 误输入：
  - 这是最常见的异常输入形式，绝大多数的异常网页输入都属于这种类型.
  - 典型的就是用户打字打错，应该输入数字的但手滑输入了一个字母之类的.
  - 误输入最大的特点就是往往不能导致基本的类型转换，数据根本都进不了系统后台进行处理.
2. 恶意输入：
  - 是Cracker恶意攻击的常用手段，用来窃取系统信息或破坏系统（非正常中断等）.
  - 这类输入往往非常隐蔽，通常可以被系统接收（能正常经过类型转换等）并进行处理.
  - 典型的如：年龄输入2000岁，一个id应该是小于1亿的正整数，但是输入一个-1，转换成无符号整数后变得超大来进行一些溢出攻击等.

<br><br>

### 二、输入校验的分类：[·](#目录)
1. 客户端校验：
  - 在前端页面级别进行校验，即输入进入action之前，直接在页面上被校验并处理.
    - 这种技术当然要**依赖前台语言js**进行处理.
    - struts的表单标签都封装了特有的js输入校验逻辑，只要再配置一下**校验规则文件**即可激活校验功能.
  - 客户端校验可以过滤大量误输入以及少量恶意输入（比如限制年龄为9-110岁等）.
  - 客户端校验**无须开发者自己实现**，struts提供了大量的、各种类型的、内建的客户端校验器，只需要在校验规则文件中指定使用哪种内建校验器即可.
2. 服务器端校验：
  - 肯定是输入已经进入action后再action中进一步校验.
    - 注意和类型转换器的区别，类型转换器位于页面和action之间，任务是将页面输入的字符串解析封装再交给action.
    - 服务器端校验的输入肯定是能通过类型转换器的，因此这类校验肯定发生在**类型转换之后**，并且已经进入了action.
    - 但当然是**在execute之前**进行校验，没校验直接给execute处理必然是有安全风险的.
  - 通过**实现validate系列方法**实现校验.
    - action必须**继承ActionSupport**（其中定义了validate系列方法）.
    - 即服务器端校验的算法和逻辑写在validate系列方法中.
  - 校验的内容是更深层次的，更复杂的，不是那些显而易见的异常，必然是**须要开发者自己实现**，比如：
    1. 输入内容中是否含有河蟹信息.
    2. 输入内总是否包含脚本代码.
3. 两者的分工：
  - 只要是**能使用前端校验的就尽量使用前端校验**，实在不行的再用后台校验.
  - 前端校验在页面内部进行，不联网，降低网络负载，充分利用客户端的计算资源，同时降低了服务器端的负载.
