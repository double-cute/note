# 目录和文件的增、删、移动、复制

<br><br>

## 目录

1. [创建空目录：mkdir]()
2. [删除目录]()
3. [创建空文件 & 更改项目的最近修改和访问时间：touch]()
4. [删除文件：rm]()
5. [移动项目（重命名）：mv]()
6. [复制项目：cp]()

<br><br>

### 一、创建空目录：mkdir  [·](#目录)
> 即make directory的缩写，不能重复创建，创建已存在的目录会报错（重复创建）.

<br>

| 创建方式 | 选项及格式 | 说明 |
| --- | --- | --- |
| 创建单级目录 | mkdir 路径名 | - |
| 创建多级目录 | mkdir **-p** 路径名 | 一路**递归往下**创建 |

<br>

- 例如：

```shell
# 1. 创建单级目录
mkdir dir  # 前提是dir不存在
mkdir dir/a/b/c # 前提是dir/a/b/已存在而c/不存在

# 2. 创建多级目录
## 前提是a、b、c三级中至少有一级不存在，那就是多级目录.
## 如果a/b/c/都存在而d/不存在那就还是在创建单级目录.
### a/b/c/d/都存在的话就报错（重复创建）
mkdir -p a/b/c/d
```

<br><br>

### 二、删除目录：[·](#目录)

<br>

**1.&nbsp; 只能删除空目录：rmdir**

> 即remove directory的缩写，该命令命令只能删除空目录，**如果目录中有任何内容都将拒绝执行**！

| 删除方式 | 选项及格式 | 说明 |
| --- | --- | --- |
| 删除单级目录 | rmdir 路径名 | - |
| 删除多级目录 | rmdir **-p** 路径名 | 一路**递归往上**删除 |

- 示例：

```shell
# 1. 单级删除
rmdir a/b/c  # 只删除c/，c/中不能有其它东西，否则报错

# 2. 多级删除
rmdir -p a/b/c
## 删除c/、b/、a/，一路往上递归删除
### c/中不能有其它东西，b/中除了c/不能有其它东西，a/中除了b/不能有其它东西
### 否则报错，拒绝删除
```

<br>

**2.&nbsp; 递归删除指定目录的整个目录树：rm -r[f]**

> rm不能直接删除目录.
>
>> 但是加上-r选项（recursive）就可以 **递归删除** 指定目录中的 **全部内容（包括目录本身）**.

- 但是单单一个-r选项会递归地询问目录中的每一个内容是否要删除（需要回答y/n）.
   - 毕竟，**删除目录以及其中内容的行为应该是非常慎重的**，因此会加入询问机制.
      - 但如果内容很多那这样手动回答y/n工作量太大，不可行.
      - 再加上 **-f选项（force）** 就可以**强制删除，无须询问**了.

| 删除方式 | 选项及格式 |
| --- | --- |
| 询问式删除 | rm **-r** 目录路径 |
| 强制式删除（无须询问）| rm **-rf** 目录路径 |

<br><br>

### 三、创建空文件 & 更改项目的最近修改和访问时间：touch  [·](#目录)
> touch不仅可以 **创建空的文件**，而且可以 **修改项目（文件 & 目录）的最近修改和访问时间**.

<br>

**1.&nbsp; 持有的时间戳：-t**

- 其实创建空文件的同时也会赋予新文件一个最近修改时间和访问时间.
- 但不管是创建空文件还是修改时间，touch都会**根据它持有的时间戳**去修改时间.

| 设定touch持有的时间戳 | 使用的选项 | 说明 |
| --- | --- | --- |
| 默认以当前系统时间作为持有的时间戳 | 无 | - |
| 自定义持有的时间戳 | -t 时间戳 | 时间戳格式：[[CC]YY]MMDDhhmm[.ss] |

- 时间戳格式说明：
   1. 199305301631.37：1993年05月30日16时31分37秒
   2. 系统会根据YY自动推断CC：规则是**就近原则（和当前时间最近）**
      1. 93：推断成1993（1993和当前最近，因此不可能是1893以及其它，但2093又没到）.
      2. 07：当然是推断城2007了.
   3. 如果YY不写就默认是**今年**.

<br>

**2.&nbsp; 修改最近修改时间和访问时间：**

> 当然是拿持有的时间戳去修改咯！
>
>> 修改的对象可以是文件，**也可以是目录**！

| 选择要修改的时间属性 | 使用的选项 | 说明 |
| --- | --- | --- |
| 只修改最近修改时间（modification time）| -m | **只有它才会改变ls -l中的时间列内容** |
| 只修改最近访问时间（access time）| -a | - |
| 同时修改两者 | -am 或者 **无** | - |

<br>

**3.&nbsp; 如果文件不存在就 `不创建` 空文件：-c**

<br>

**4.&nbsp; 示例：**

```Shell
# 1. 如果a.txt不存在就创建空的a.txt
$ touch a.txt  # 并以当前时间赋予访问和修改时间

# 2. 用06月17日14点28分的时间戳，只修改最近访问时间
## 如果b.sh不存在则不创建它，否则仅仅就是修改一下最近访问时间
$ touch -t 06171428 -ca b.sh

# 3. 可以touch目录哟！
$ touch dir/  # 以当前时间修改
```

<br><br>

### 四、删除文件：rm  [·](#目录)
> 即remove的缩写，命令格式：rm [选项] 待删除文件列表.

<br>

- **额外的-r选项还可以递归删除目录.**

| 选项 | 说明 |
| --- | --- |
| -f | 强制删除（删除不存在的文件不会提示）|
| -i | 提示是否确定删除（y/n）|

<br><br>

### 五、移动项目（重命名）：mv  [·](#目录)
> 即move的缩写，移动操作 **等价于重命名**（**Linux中的项目名包括路径**）.
>
>> 可移动文件也可移动目录.
>>
>>> - **移动（mv）要比复制（cp）快很多**，原因是：
>>>    - mv的实现原理仅仅就是项目重命名（rename），而cp还需要拷贝内容（memcpy）.

<br>

1. 命令格式：mv 原项目 新项目|已存在的目录
   - **第二个参数如果是已存在的目录，那么就将原项目移动到该目录下.**
2. 该命令不改变项目的：
   1. 内容.
   2. **inode值**.
   3. **时间戳**.
      - 今后时间戳同一指代**最近修改时间**和**最近访问时间**.
3. 如果新项目（输出）原来就存在，则该命令 **没有任何询问，直接覆盖**，所以一定要小心！

<br><br>

### 六、复制项目：cp  [·](#目录)
> 即copy的缩写，无-R选项只能复制文件，有-R选项才能复制目录.
>
>> 复制出来的新项目 **拥有全新的inode值**，这就说明复制出来一片新的磁盘空间.

<br>

**1.&nbsp; 命令格式：**

> 和mv一样，**如果第2个参数是已存在的目录则表示复制到该目录中**.

| 用法 | 格式 |
| --- | --- |
| 复制文件 | cp 原文件 新文件\|已存在的目录 |
| 复制目录 | cp **-R** 原目录 新目录\|已存在的目录 |

<br>

**2.&nbsp; 新项目是否保持原项目的属性：-p**

- 即preserve的缩写.
   1. 有-p选项：新项目保留原项目的属性（**属主、时间戳**）.
   2. 无-p选项：新项目的属性重新生成：
      1. **属主：赋成当前命令的操作人.**
      2. **时间戳：赋成当前操作命令的时间戳.**

<br>

**3.&nbsp; 是否覆盖：**

| 用法 | 选项 |
| --- | --- |
| 不管存不存在直接**强制覆盖，无提示** | 无(~~-f~~) |
| 只覆盖最后修改时间比目标新的文件，无提示 | -u, --update |
| 对**会发生覆盖的项目**进行提示 | -i(y/other，可以和前两者组合) |
