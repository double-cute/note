# 罗列目录中的项目：ls
> list directory contents
>
>> 罗列目录中的内容. （目标参数可用通配符过滤）
>>
>> - 实际上除了正则表达式命令之外的命令都可以使用基本的通配符.
>>
>>> - 除了以下之外：
>>>    1. -h必须和-l组合使用.
>>>    2. -X、-t、-S三种排序互斥.
>>> - 其余所有选项均可以自由组合！

<br><br>

## 目录

<br>

- coreutils: /bin/ls

<br>

1. [命令格式](#一命令格式)
2. [递归输出指定目录的完整目录树：-R](#二递归输出指定目录的完整目录树-r--)
3. [区分文件类型：-F](#三区分文件类型-f--)
4. [显示隐藏内容：-a | -A](#四显示隐藏内容-a---a--)
5. [输出每个项目的inode和块数：-i -s](#五输出每个项目的inode和块数-i--s--)
6. [排序](#六排序)
7. [详细信息（一行一个项目）：-l](#七详细信息一行一个项目-l--)
8. [必须和-l组合的选项（人文大小）：-h](#八必须和-l组合的选项人文大小-h--)
9. [颜色 & 时间格式（必须和-l组合）](#九颜色--时间--时间格式必须和-l组合)

<br><br>

### 一、命令格式：[·](#目录)

<br>

- **目标参数（项目）可使用通配符过滤.**

<br>

| 用法 | 格式 | 说明 |
| --- | --- | --- |
| 无参 | ls [选项表] | 罗列**当前目录**中的内容（无参默认为当前目录，即'.'） |
| 指定目录或文件 | ls [选项表] **项目列表** | 1. 如果是目录则罗列目录中的内容.<br>2. 如果是文件则只罗列文件本身. |

- 示例：

```shell
# 1. 罗列单个目录
$ ls dir
a.txt child_dir main.c

# 2. 罗列多个目录
$ ls dir1 dir2
dir1:
a.txt b.txt

dir:
c.txt b.txt

# 3. 罗列文件
$ ls a.txt main.c
a.txt main.c

# 4. 混合罗列（先输出文件再输出各个目录）
$ ls dir1 dir2 test.c a.txt
a.txt test.c

dir1:
p.txt c.txt

dir2:
q.txt u.sh
```

<br><br>

- ls在**默认情况**下：如果项目参数是目录，则会列出目录中的内容.
   - 但如果加了 **-d** 参数，则遇到目录就不会罗列目录中的内容，而是仅仅输出该目录信息.
      - 准确地讲，只是遇到目录只显示目录本身的信息而不罗列其中的内容而已，但是如果遇到正常的文件还是会显示的文件信息的，比如：ls -d dir a.txt   (结果是dir a.txt，a.txt还是正常输出！)
   - 例如：

```Shell
# 1. 无参默认就是当前目录(.)
$ ls -d
.

# 2.
$ ls -dF *
a.txt
a/  # 遇到目录就只输出该目录的信息，不输出该目录中的内容
dir/
b.txt
c.sh

# 3. 普通情况
$ ls -d a.txt dir/
a.txt dir/  # 遇到目录只输出该目录的信息，不输出该目录中的内容
```

<br><br>

### 二、递归输出指定目录的完整目录树：-R  [·](#目录)
> 该选项不仅会输出指定目录的内容，还会输出其中 **子目录的内容、子子目录的内容**.
>
>> **递归地输出整个完整的目录树.**

<br>

- 和-d连用（-Rd)会使R无效，只有d起到作用.

```shell
# 目录树：a/aa/aaa b/ c/ a.txt b.txt
$ ls -RF
.:
a/  a.txt  b/  b.txt  c/

./a:
aa/

./a/aa:
aaa/

./a/aa/aaa:

./b:

./c:
```

<br><br>

### 三、区分文件类型：-F  [·](#目录)
> 对于 **彩色终端模拟器**，ls会以不同颜色来区分不同类型的文件.
>
>> 对于不支持彩色的终端模拟器则可以使用-F选项从输出中区分文件的类型.

<br>

- 通过ls命令为文件名添加的额外后缀区分类型：

| 后缀 | 文件类型 |
| --- | --- |
| 无 | 普通文件 |
| / | 目录 |
| * | 可执行文件 |
| @ | 链接 |

<br><br>

### 四、显示隐藏内容：-a | -A  [·](#目录)
> Linux中的 **隐藏文件** & **隐藏目录** 名称都以'.'开头.
>
>> 因此，**如果想创建隐藏文件或隐藏目录，只要在命名时以'.'开头即可**.

<br>

| 选项 | 说明 |
| --- | --- |
| -a | 罗列所有，包括.、..、隐藏内容 |
| -A | -a但不包括.和.. |

<br><br>

### 五、输出每个项目的inode和块数：-i -s  [·](#目录)
> inode值要比块数大很多.

<br>

1. -i：每个项目名之前加上其inode值.
2. -s：每个项目名之前加上其占用的块数.
3. -is：组合使用一定是**先输出inode值，再输出块数，最后输出项目名**.

<br>

- 示例：

```shell
$ ls -siF
262414 4 a/  262385 0 a.txt  262415 4 b/  262388 0 b.txt  262416 4 c/
```

<br><br>

### 六、排序：[·](#目录)
> 排序规则 **只能使用一种，不能同时使用多种**.
>
>> 如果同时使用多种，最后 **只会有一种生效，其余无效**.

<br>

| 输出排序方式 | 选项 |
| --- | --- |
| 无 | 默认按照文件名大小**升序**，其中<br>**数字 < 大写字母 < 小写字母 < 中文** |
| -X | 按照扩展名大小排序（规则同上）|
| -t | 按最后修改时间（**从近到远**）|
| -S | 按照大小**降序**（从大到小）|
| -r | 反序，和上面的4种组合使用 |

<br><br>

### 七、详细信息（一行一个项目）：-l  [·](#目录)
> -l是long listing format的缩写.
>
>> 表示列出每个项目的详细信息，一行一个项目.

<br>

**1.&nbsp; 第一行输出的是罗列的目标总共占多少个块：**

- 示例：

```shell
$ ls -l
total 512   # 当前目录的所有内容总共占了512个块
...
```

<br>

**2.&nbsp; 如果和-si组合：**

- 那么每行（对应每个项目）开头两列分别是inode值和块数.

<br>

**3.&nbsp; 接下来第1列：**

```shell
$文件类型$属主权限$属组权限$其他组用户权限
```

1. $文件类型：
   1. -：文件.
   2. d：目录.
   3. l：链接.
   4. c：字符型设备.
   5. b：块设备.
   6. n：网络设备.
2. $权限：
   1. 第1位：r/-，可读/不可读.
   2. 第2位：w/-，可写/不能写.
   3. 第3位：x/-，可执行/不可执行.

- 示例：

```shell
drwxrwxr-x
# 1. 是一个目录
# 2. 属主可读写执行.
# 3. 属组可读写执行.
# 4. 其它组用户可读、不可写、可执行.
```

<br>

**4.&nbsp; 其余列：**

- 第2列：硬链接数.
- 第3列：属主的用户名（登录名）
- 第4列：属组名.
- 第5列：文件大小.
- 第6列：最近一次修改时间.
- 第7列：项目名.

<br><br>

### 八、必须和-l组合的选项（人文大小）：-h  [·](#目录)
> -l第5列（文件大小）**默认以字节为单位（没有单位名）**.

- 组合-hl之后，可以让文件大小以人文的形式输出：
   1. 单位名（无、K、M、G...），其中**无单位名表示字节**.
   2. **进率是1000不是1024！！**
- h是human readable的简称，即人文形式.
- 由于只有-l选项才会输出文件大小，因此-h只能和-l组合使用，单独的ls -h没用！

<br><br>

### 九、颜色 & 时间 & 时间格式（必须和-l组合）：[·](#目录)

<br>

**1.&nbsp; 设置ls的输出颜色：--colors**

| 选项 | 说明 |
| --- | --- |
| --color=never | 不显示颜色 |
| --color=always | 永远显示颜色 |
| --color=auto | 根据环境配置自动判断是否给予颜色（默认情况）|

<br>

**2.&nbsp; 设置ls -l第6列显示的时间是 `何种类型` 的时间：**

| 选项 | 说明 |
| --- | --- |
| 无 | 最近**修改**时间 |
| --time=atime | 最近**访问**时间 |
| --time=ctime | 最近**权限修改**时间 |

<br>

**3.&nbsp; 设置ls -l的第6列时间的格式：--full-time**

| 选项 | 说明 | 示例 |
| --- | --- | --- |
| 无（默认）| 月日时分 | 3-17 15:12 |
| --full-time | 完整格式：年月日时分秒[机器时间]时区 | 2017-03-17 15:57:59.864000000 +0800 |
